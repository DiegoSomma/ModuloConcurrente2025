programa ejercicio5

procesos
  proceso juntarUnPapel(ES papel : numero; ES seguir : boolean)
  comenzar
    si(HayPapelEnLaEsquina)
      tomarPapel
      papel:= 1
    sino
      seguir := F
  fin

  proceso recorrer
  variables
    caAct, avAct,papel: numero
    seguir:  boolean
    id : numero
  comenzar
    caAct := PosCa
    avAct := PosAv
    seguir := V
    papel := 0
    RecibirMensaje(id, rJefe)
    mientras(seguir & (caAct < 99))
      BloquearEsquina(11,11)
      Pos(11,11)
      juntarUnPapel(papel, seguir)
      Pos(avAct, caAct)
      LiberarEsquina(11,11)
      si((HayPapelEnLaBolsa) & (seguir))
        depositarPapel
        papel := papel - 1
        mover
        avAct := PosAv
        caAct := PosCa  
    EnviarMensaje(id, rJefe)
    EnviarMensaje(caAct, rJefe)
  fin
  
areas
  areaR1 : AreaP(4,1,4,100)  
  areaR2 : AreaP(6,1,6,100) 
  areaR3 : AreaP(8,1,8,100) 
  areaR4 : AreaP(10,1,10,100) 
  
  areaComun : AreaPC(11,11,11,11)
  
  areaJefe : AreaP (12,12,12,12)
  
robots
  robot corredor
  comenzar
    recorrer
  fin
  
  robot jefe
  variables
    calleAct, calleMax, idAct, idMax : numero
  comenzar
    EnviarMensaje(1, r1)
    EnviarMensaje(2, r2)
    EnviarMensaje(3, r3)
    EnviarMensaje(4, r4)
    
    repetir 4
      RecibirMensaje(idAct, *)
      si (idAct = 1)
        RecibirMensaje(calleAct, r1)
      sino
        si (idAct = 2)
          RecibirMensaje(calleAct, r2)
        sino
          si (idAct = 3)
            RecibirMensaje(calleAct, r3)
          sino
            RecibirMensaje(calleAct, r4)
      si(calleAct > calleMax)
        idMax := idAct
        calleMax := calleAct
    Informar('llego mas lejos r', idMax)    
  fin  
  

variables
  r1, r2, r3, r4 : corredor
  rJefe : jefe
  
comenzar
  AsignarArea(r1, areaR1)
  AsignarArea(r2, areaR2)
  AsignarArea(r3, areaR3)
  AsignarArea(r4, areaR4)

  AsignarArea(r1, areaComun)
  AsignarArea(r2, areaComun)
  AsignarArea(r3, areaComun)
  AsignarArea(r4, areaComun)
  
  AsignarArea(rJefe,areaJefe)
  
  Iniciar(r1, 4, 1)
  Iniciar(r2, 6, 1) 
  Iniciar(r3, 8, 1) 
  Iniciar(r4, 10, 1)
  Iniciar(rJefe, 12, 12)      
fin
